i#!/bin/bash
playlist=$(osascript -e 'tell application "Music" to get name of playlists' \
  | tr ',' '\n' \
  | sed 's/^ *//;s/ *$//' \
  | fzf)

if [ -n "$playlist" ]; then
  osascript -e "
    tell application \"Music\"
      set shuffle enabled to true
      set shuffle mode to songs
      play track 1 of playlist \"${playlist}\"
      set newQueue to every track of playlist \"${playlist}\"
      set queue of player to newQueue
    end tell
  "
fi
